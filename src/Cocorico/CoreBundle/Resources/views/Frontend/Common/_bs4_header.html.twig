{% trans_default_domain 'cocorico' %}


{% if app.environment == 'dev' %}
    <div class="alert alert-warning fixed-top">DEV</div>
{% endif %}
{% if app.session.get('isAdmin') %}
    <div class="alert alert-danger fixed-top">ADMIN MODE</div>
{% endif %}

<!-- header of the page -->
<!-- BS4 migration -->
<header class="c-header" role="banner" id="header">
  <section class="c-header__container container">
    <div class="c-header__row row">
      <div class="c-header__col c-header__col--logo col-auto d-flex align-items-center pr-0 pr-md-3">
        <a href="#top" class="c-header__logo-ministere"><img src="/images/logo-ministere-travail.svg" alt="Ministère du travail"></a>
      </div>
      <div class="c-header__col c-header__col--logo col-auto d-flex align-items-center px-0 px-md-3">
        <span><img src="/images/logo-marche.svg" alt="Le marché de l'inclusion" class="img-fluid"></span>
      </div>
      <div class="c-header__col c-header__col--nav col d-none d-xl-inline-flex d-xl-flex align-items-center justify-content-end">
        <nav>
          <ul>
            <li class="is-current">
                <a id="h_fav" href="{{ path('cocorico_listing_favourite') }}" tabindex="5" rel="noopener">
                    <span>{{ 'nav.favorites.link'|trans }}</span>
                    <span id="fav-count"></span>
                </a>
            </li>            
            {# User info #}
            {%- if app.user is not null and is_granted("IS_AUTHENTICATED_FULLY") -%}
                <li id="dashboard-dropdown" class="dropdown">
                    <a id="dashboard-link" class="dropdown-toggle" href="{{ path('cocorico_user_dashboard_profile_edit_about_me') }}" tabindex="6" title="My Dashboard" data-toggle="dropdown" role="button" aria-expanded="false" rel="noopener">
                        <span>{{ 'nav.dashboard.link'|trans }}</span>
                        <span id="nb-unread-msg"></span>
                        <span class="icon-down-open-mini"></span>
                    </a>
                    {% include '@CocoricoCore/Frontend/Common/_nav.html.twig' with {'nav_dashboard_current':''} only %}
                </li>
            {%- else -%}
                <li>
                    <a id="h_login" href="{{ path('cocorico_user_login') }}" tabindex="7" rel="noopener">
                        {{ 'nav.login.link'|trans }}
                    </a>
                </li>
            {%- endif -%}
            {# New listing link #}
            {% if app.session.get('canPublish') %}
                <li>
                    <a id="new_offer" href="{{ path('cocorico_listing_new') }}" class="btn btn-primary navbar-right" tabindex="9" rel="noopener">
                        <span>
                            {{ 'nav.listing.new.link'|trans }}
                        </span>
                    </a>
                </li>
            {% endif %}
            {%- if app.user is null -%}
                <li>
                    <a id="h_connect" href="{{ path('cocorico_user_register') }}" tabindex="6"  class="btn btn-outline-primary" rel="noopener">
                        <span>
                            {{ 'nav.register.link'|trans }}
                        </span>
                    </a>
                </li>
            {% endif %}
          </ul>
        </nav>
      </div>
      <div class="c-header__col c-header__col--burger col d-flex align-items-center justify-content-end d-xl-none" data-toggle="burger">
        <span id="burger"><img src="/images/picto-burger.svg" alt="Menu" /></span>
        <span id="close"><img src="/images/picto-close.svg" alt="Fermer" /></span>
      </div>
      <div id="burgerNav">
        <nav>
          <ul>
            <li class="is-current">
                <a id="h_fav" href="{{ path('cocorico_listing_favourite') }}" tabindex="5" rel="noopener">
                    <span>{{ 'nav.favorites.link'|trans }}</span>
                    <span id="fav-count"></span>
                </a>
            </li>            
            {# User info #}
            {%- if app.user is not null and is_granted("IS_AUTHENTICATED_FULLY") -%}
                <li id="dashboard-dropdown" class="dropdown">
                    <a id="dashboard-link" class="dropdown-toggle" href="{{ path('cocorico_user_dashboard_profile_edit_about_me') }}" tabindex="6" title="My Dashboard" data-toggle="dropdown" role="button" aria-expanded="false" rel="noopener">
                        <span>{{ 'nav.dashboard.link'|trans }}</span>
                        <span id="nb-unread-msg"></span>
                        <span class="icon-down-open-mini"></span>
                    </a>
                    {% include '@CocoricoCore/Frontend/Common/_nav.html.twig' with {'nav_dashboard_current':''} only %}
                </li>
            {%- else -%}
                <li>
                    <a id="h_login" href="{{ path('cocorico_user_login') }}" tabindex="7" rel="noopener">
                        {{ 'nav.login.link'|trans }}
                    </a>
                </li>
            {%- endif -%}
            {# New listing link #}
            {% if app.session.get('canPublish') %}
                <li>
                    <a id="new_offer" href="{{ path('cocorico_listing_new') }}" class="btn btn-primary navbar-right" tabindex="9" rel="noopener">
                        <span>
                            {{ 'nav.listing.new.link'|trans }}
                        </span>
                    </a>
                </li>
            {% endif %}
            {%- if app.user is null -%}
                <li>
                    <a id="h_connect" href="{{ path('cocorico_user_register') }}" tabindex="6"  class="btn btn-outline-primary" rel="noopener">
                        <span>
                            {{ 'nav.register.link'|trans }}
                        </span>
                    </a>
                </li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </div>
  </section>
</header>
